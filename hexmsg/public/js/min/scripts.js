"use strict";function sendMessage(){for(var chatInput=document.getElementById("chat_input"),chatSubmitIcon=document.getElementById("chat_submit_icon"),chatInputChars=chatInput.value.toString().split(""),i=0;i<chatInputChars.length&&" "==chatInputChars[i];i++)chatInputChars[i]="";chatInput.value=chatInputChars.join(""),chatInput.value.length<1e3&&chatInput.value.length>=1?(socket.emit("message",chatInput.value),chatInput.value="",chatSubmitIcon.classList.remove("filled"),chatSubmitIcon.classList.add("empty")):chatInput.value.length>1e3&&alert("Messages need to be under 1000 characters!")}function parseEmoji(text){for(var emoji in availableEmoji){var emojiRegex=new RegExp(":"+emoji+":","g");text=text.replace(emojiRegex,availableEmoji[emoji])}return text}var availableEmoji={poop:"ðŸ’©",thinking:"ðŸ¤”"},userid=void 0,initialScrollHeight=void 0,socket=io();document.addEventListener("DOMContentLoaded",function(){var chatInput=document.getElementById("chat_input"),chatSubmit=document.getElementById("chat_submit"),chatSubmitIcon=document.getElementById("chat_submit_icon");initialScrollHeight=document.getElementById("messages").scrollHeight,chatSubmit.addEventListener("click",sendMessage),chatInput.addEventListener("keydown",function(key){13==key.keyCode&&sendMessage()}),chatInput.addEventListener("keyup",function(key){0==chatInput.value.length?(chatSubmitIcon.classList.remove("filled"),chatSubmitIcon.classList.add("empty")):(chatSubmitIcon.classList.remove("empty"),chatSubmitIcon.classList.add("filled"))})}),socket.on("broadcast",function(data){var messagesDiv=document.getElementById("messages"),oldScrollHeight=messagesDiv.scrollHeight;data.text=parseEmoji(data.text),userid==data.clientid?messagesDiv.innerHTML+="<div class='message sent' style='background-color:"+data.color+";border-color:"+data.color+"'><p id='"+data.clientid+"'>"+data.text+"</p></div>":messagesDiv.innerHTML+="<div class='message' style='background-color:"+data.color+";border-color:"+data.color+"'><p id='"+data.clientid+"'>"+data.text+"</p></div>",messagesDiv.scrollTop==oldScrollHeight-initialScrollHeight&&(messagesDiv.scrollTop=messagesDiv.scrollHeight)}),socket.on("bot_message",function(data){document.getElementById("messages").innerHTML+=data.html}),socket.on("startup",function(data){userid=data.userid}),socket.on("client_error",function(data){alert("Error: "+data)});